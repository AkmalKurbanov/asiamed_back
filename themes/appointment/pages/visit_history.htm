title = "Детали пациента"
url = "/doctor/patient/:patient_id"
layout = "default"

[session]
security = "user"
redirect = "/login"

[patientManagement]
patient_id = "{{ :patient_id }}"
==

<div class="container py-5">

    <h3>Фильтр по дате</h3>
       <!-- Форма для фильтрации -->
  <form data-request="patientManagement::onFilterVisitHistory">
    <div class="bg-light rounded h-100 d-flex align-items-center p-5">

      <input type="hidden" name="patient_id" value="{{ patient.id }}"> <!-- Скрытое поле для передачи patient_id -->
      
      <div class="row g-3" style="width:100%">
      <div class="col-12 col-lg-4">
            <div class="input-group" id="diapozon1"> 
                <input type="text" id="start_date" name="start_date" class="form-control border-0" placeholder="Начальная дата" autocomplete="off" style="height: 55px; cursor:pointer;" />
                <div class="input-group-append" style="position: absolute; right:10px; top:50%; transform: translateY(-50%); pointer-events:none;">
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-4">
            <div class="input-group" id="diapozon2"> 
                <input type="text" id="end_date" name="end_date" class="form-control border-0" placeholder="Конечная дата" autocomplete="off" style="height: 55px; cursor:pointer;" />
                <div class="input-group-append" style="position: absolute; right:10px; top:50%; transform: translateY(-50%); pointer-events:none;">
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
            </div>
        </div>
      <div class="col-12 col-lg-4">
        <button type="submit" class="btn btn-primary w-100 py-3">Применить фильтр</button>
      </div>
      </div>
      

      
    </div>
  </form>

    <br>

    <!-- Список истории посещений -->
    <div id="visit_history_list">
        {% partial 'visit_history_list' visit_histories=visit_histories %}
    </div>

    <br>
   
    <!-- Форма для добавления новой записи о визите -->
    <h3>Добавить новую запись о визите</h3>
    <form data-request="patientManagement::onCreateVisitHistory">
      <div class="bg-light rounded h-100 d-flex align-items-center p-5">
        <input type="hidden" name="patient_id" value="{{ patient.id }}"> <!-- Скрытое поле для передачи patient_id -->
        <div class="row g-3" style="width:100%">
        <div class="col-lg-12">
          <label>Дата визита</label>
            <div class="input-group" id="datepicker">
              <input type="text" id="visit_date" name="visit_date" class="form-control border-0" placeholder="Выберите дату" autocomplete="off" required style="height: 55px; cursor:pointer;" />
              <div class="input-group-append" style="position: absolute; right:10px; top:50%; transform: translateY(-50%); pointer-events:none; ">
                  <div class="input-group-text"><i class="fa fa-calendar"></i></div>
              </div>
            </div>
          </div>
        <div class="col-lg-12">
          <label>Дата визита11</label>
            <div class="input-group">
              <input type="text" id="birthdate" name="birthdate" class="form-control border-0" placeholder="Выберите дату рождения" autocomplete="off" required style="height: 55px; cursor:pointer;" />
              <div class="input-group-append" style="position: absolute; right:10px; top:50%; transform: translateY(-50%); pointer-events:none; ">
                  <div class="input-group-text"><i class="fa fa-calendar"></i></div>
              </div>
            </div>
          </div>

         <div class="col-lg-12">
            <label>Заметки</label>
            <textarea name="notes" class="form-control" required></textarea>
        </div>

        <div class="col-sm-12">
            <label>Статус визита</label>
            <select id="doctor_id" name="doctor_id" required class="form-select border-0" style="height: 55px;">
              <option value="Ожидается">Ожидается</option>
              <option value="Завершено">Завершено</option>
              <option value="Отменено">Отменено</option>
            </select>
        </div>

        <div class="col-lg-12">
          <button type="submit" class="btn btn-primary mt-4 py-3">Добавить запись</button>
        </div>
        </div>
        </div>
    </form>

    
</div>
